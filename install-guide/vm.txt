[[vm]]
== Подготовка диска ==

Переход к этому шагу может занять некоторое время. Время ожидания зависит от
производительности компьютера, объёма жёсткого диска, количества разделов на
нём и т.п.

На этом этапе подготавливается площадка для установки ALT Linux, в первую
очередь -- выделяется свободное место на диске.

=== Выбор профиля разбиения диска ===

image::images/vm.png[Выбор профиля разбиения диска,align="center"]

В списке разделов перечислены уже существующие на жёстких дисках разделы (в том
числе здесь могут оказаться съёмные flash-диски, подключённые к компьютеру в
момент установки). Ниже перечислены доступные профили разбиения диска.

Профиль -- это шаблон распределения места на диске для установки Linux. Можно
выбрать один из профилей:

- Использовать неразмеченное пространство;
- Удалить все разделы и создать разделы автоматически;
- Подготовить разделы вручную.

Первые два профиля предполагают автоматическое разбиение диска.

=== Автоматические профили разбиения диска ===

[WARNING]

Будьте внимательны при использовании автоматических профилей разбиения дисков.
Соответствующие изменения на диске происходят сразу же по нажатию кнопки
*Далее*.

Если при применении одного из профилей автоматического разбиения диска
доступного места на диске окажется недостаточно, то на монитор будет выведено
сообщение об ошибке: *Невозможно применить профиль, недостаточно места на
диске*.

Если данное сообщение появилось после попытки применить профиль *Использовать
неразмеченное пространство*, то вы можете полностью очистить место на диске,
применив профиль *Удалить все разделы и создать разделы автоматически*.

Если сообщение о недостатке места на диске появляется и при применении профиля
*Удалить все разделы и создать разделы автоматически*, то это связано с
недостаточным для использования автоматических методов разметки объёмом всего
диска. В этом случае вы можете воспользоваться методом ручной разметки: профиль
*Подготовить разделы вручную*.

[WARNING]

Будьте осторожны при применении профиля *Удалить все разделы и создать разделы
автоматически*! В этом случае будут удалены _все_ данные со всех дисков
(включая внешние flash-диски) без возможности восстановления. Рекомендуется
использовать эту возможность при полной уверенности в том, что диски не
содержат никаких ценных данных.

=== Ручной профиль разбиения диска ===

При необходимости освободить часть дискового пространства следует
воспользоваться профилем разбиения вручную. Вы сможете удалить некоторые из
существующих разделов или содержащиеся в них файловые системы. После этого
можно создать необходимые разделы самостоятельно или вернуться к шагу выбора
профиля и применить один из автоматических профилей. Выбор этой возможности
требует знаний об устройстве диска и технологиях его разметки.

По нажатию *Далее* будет произведена запись новой таблицы разделов на диск и
форматирование разделов. Только что созданные на диске программой установки
разделы пока не содержат данных и поэтому форматируются без предупреждения.
Уже существовавшие, но изменённые разделы, которые будут отформатированы,
помечаются специальным значком в колонке *Файловая система* слева от названия.
Если вы уверены в том, что подготовка диска завершена, подтвердите переход к
следующему шагу нажатием кнопки *Далее*.

Не следует форматировать разделы с теми данными, которые вы хотите сохранить,
например, со старыми пользовательскими данными (`/home`) или с другими
операционными системами. Отформатировать можно любые разделы, которые вы хотите
«очистить» (т.е. удалить все данные).

//application path
[WARNING]

Не уменьшайте NTFS-раздел с установленной Microsoft Windows
Vista/Windows 7 средствами программы установки. В противном случае вы не
сможете загрузить Microsoft Windows Vista/Windows 7 после установки ALT Linux.
Для выделения места под установку ALT Linux воспользуйтесь средствами,
предоставляемыми самой Microsoft Windows Vista/Windows 7: *Управление дисками
-> Сжать*.

=== Дополнительные возможности разбиения диска ===

Ручной профиль разбиения диска позволяет установить ОС на программный
RAID-массив, разместить разделы в томах LVM и использовать шифрование на
разделах. Данные возможности требуют от пользователя понимания принципов
функционирования указанных технологий.

==== Создание программного RAID-массива ====

NOTE: Обратите внимание, что для создания программного RAID-массива потребуется
минимум два жёстких диска.

Программа установки поддерживает создание программных RAID-массивов следующих
типов:

* RAID 1;
* RAID 0;
* RAID 4/5/6;
* RAID 10.

Процесс подготовки к установке на RAID условно можно разбить на следующие шаги:

* создание разделов на жёстких дисках;
* создание RAID-массивов на разделах жёсткого диска;
* создание файловых систем на RAID-массиве.

image::images/raid-create-partition.png[Создание разделов для RAID-массива,align="center"]

При создании разделов на жёстких дисках для последующего включения их в
RAID-массивы следует указать *Тип раздела* для них равным *Linux RAID*.

NOTE: При создании разделов следует учесть, что объём результирующего массива
может зависеть от размера, включенных в него разделов жёсткого диска. Например,
при создании RAID 1, результирующий размер массива будет равен размеру
минимального участника.

После создания разделов на дисках можно переходить к организации самих
RAID-массивов. Для этого в списке следует выбрать пункт *RAID*, после чего
нажать кнопку *Создать RAID*.

Далее мастер предложит выбрать тип массива и указать его участников.

image::images/raid-select-members.png[Выбор участников RAID-массива,align="center"]

После создания RAID-массивов их можно использовать как обычные разделы на
жёстких дисках, то есть, на них можно создавать файловые системы или же,
например, включать их в LVM-тома.

==== Создание LVM-томов ====

WARNING: Не работает!

Процесс подготовки к установке на LVM условно можно разбить на следующие шаги:

* создание группы томов LVM;
* создание томов LVM;
* создание файловых систем на томах LVM.

image::images/lvm-create-volume-group.png[Создание группы томов LVM,align="center"]

NOTE: Для создания группы томов LVM может потребоваться предварительно удалить
таблицу разделов с жёсткого диска.

Для создания группы томов LVM в списке следует выбрать пункт *LVM*, после чего
нажать кнопку *Создать группу томов*.

image::images/lvm-create-logical-volume.png[Создание тома,align="center"]

После создания группы томов LVM её можно использовать как обычный жёсткий диск,
то есть внутри группы томов можно создавать тома (аналог раздела на физическом
жёстком диске) и файловые системы внутри томов.

==== Создание шифрованных разделов ====

WARNING: Не дописано!

WARNING: Не работает!

Программа установки позволяет создавать шифрованные разделы.

image::images/luks-create-partition.png[Создание шифрованного раздела,align="center"]

Процесс создания шифрованного раздела ничем не отличается от процесса создания
обычного раздела и инициируется нажатием на кнопку *Create Encrypted
Partition*.

После создания шифрованного раздела мастер, как и при создании обычного
раздела, предложить создать на нём файловую систему и при необходимости указать
точку монтирования.
