[[superuser]]
== Режим суперпользователя ==

=== Какие бывают пользователи? ===

Linux -- система многопользовательская, а потому пользователь -- ключевое
понятие для организации всей системы доступа в Linux. Файлы всех пользователей
в Linux хранятся раздельно, у каждого пользователя есть собственный домашний
каталог, в котором он может хранить свои данные. Доступ других пользователей к
домашнему каталогу пользователя может быть ограничен.

Суперпользователь в Linux -- это выделенный пользователь системы, на которого
не распространяются ограничения прав доступа. Именно суперпользователь имеет
возможность произвольно изменять владельца и группу файла. Ему открыт доступ на
чтение и запись к любому файлу системы и доступ на чтение, запись и
использование к любому каталогу.

Среди учётных записей Linux всегда есть учётная запись суперпользователя -- root. Поэтому вместо
«суперпользователь» часто говорят «root». Множество системных файлов
принадлежат root, множество файлов только ему доступны для чтения или записи.
Пароль этой учётной записи -- одна из самых больших драгоценностей системы.
Именно с её помощью системные администраторы выполняют самую ответственную
работу.

=== Для чего может понадобится режим суперпользователя? ===

Системные утилиты, например, такие как «Центр управления системой» или
«Программа управления пакетами Synaptic» требуют для своей работы привилегий
суперпользователя, потому что они вносят изменения в системные файлы. При их
запуске выводится диалоговое окно с запросом пароля системного администратора.

=== Как получить права суперпользователя? ===

Для опытных пользователей, умеющих работать с командной строкой, существует два
различных способа получить права суперпользователя.

Первый -- это зарегистрироваться в системе под именем root.

Второй способ -- воспользоваться специальной утилитой `su` (shell of user),
которая позволяет выполнить одну или несколько команд от лица другого
пользователя. По умолчанию эта утилита выполняет команду `sh` от пользователя
root, то есть запускает командный интерпретатор. Отличие от предыдущего способа
в том, что всегда известно, кто именно запускал `su`, а значит, ясно, кто
выполнил определённое административное действие.

В некоторых случаях удобнее использовать не `su`, а утилиту `sudo`, которая
позволяет выполнять только заранее заданные команды.

[NOTE]
Для того чтобы воспользоваться командами `su` и `sudo` необходимо быть членом
группы `wheel`. Пользователь, созданный при установке системы, по умолчанию уже
включён в эту группу.

=== Как перейти в режим суперпользователя?  ===

Для перехода в режим суперпользователя наберите в терминале команду su -.

Если воспользоваться командой su без ключа, то происходит вызов командного
интерпретатора с правами root. При этом значение переменных окружения, в
частности $PATH, остаётся таким же, как у пользователя: в переменной $PATH не
окажется каталогов /sbin, /usr/sbin, без указания полного имени будут недоступны
команды route, lilo, mkswap и другие. Более того, переменная $HOME будет
указывать на каталог пользователя, все программы, запущенные в режиме
суперпользователя, сохранят свои настройки с правами root в каталоге
пользователя, что в дальнейшем может вызвать проблемы.

Чтобы избежать этого, следует использовать su -. В этом режиме su запустит
командный интерпретатор в качестве login shell, и он будет вести себя в точности
так, как если бы в системе зарегистрировался root.
